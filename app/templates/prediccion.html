<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/prediccion.css') }}">
    <title>DreamXI</title>
    <link rel="icon" href="{{ url_for('static', filename='imagenes/logo_dreamXI.png') }}" type="image/x-icon">
<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen:300|Bungee" rel="stylesheet">
</head>

<body>
    <section>
        <h1> PREDICCIONES SOBRE JUGADORES</h1>
        <h2>Entrena el modelo para realizar las predicciones:</h2>
        <button id="trainModelButton">Entrenar Modelo</button>
        <div id="trainResponse"></div>
        <h2>Selecciona un jugador:</h2>
        <select id="player_select">
            {% for player in players %}
                <option value="{{ player.Nombre }}">{{ player.Nombre }}</option>
            {% endfor %}
        </select>
        <h2>Selecciona la variable objetivo:</h2>
        <select id="target_select">
            <option value="Puntos">Puntos</option>
            <option value="Goles">Goles</option>
            <option value="Precio">Precio</option>
            <!-- Agrega más opciones según tus necesidades -->
        </select>
        <button id="show_player_info">Mostrar información del jugador</button>
        <div id="player_info"></div> 
        <button id="predict_button">Predecir valores</button> <!-- Botón para predecir -->
        <div id="prediction_result"></div> <!-- Aquí se mostrará la predicción -->
    </section>
    <h1> PREDICCIONES SOBRE EL EQUIPO</h1>
    <section>
    </section>

    <script src="{{ url_for('static', filename='js/prediccion.js') }}"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            $('#trainModelButton').click(function() {
                $.ajax({
                    url: '/train',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({target_column: 'Goles'}),  // Cambia 'goles' por la columna objetivo deseada
                    success: function(response) {
                        $('#trainResponse').html('Modelo entrenado correctamente');
                    },
                    error: function() {
                        $('#trainResponse').html('Error en el entrenamiento del modelo.');
                    }
                });
            });
        });
    </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        $('#predict_button').click(function() {
            var player = $('#player_select').val();  // Asegúrate de que esto corresponda al ID correcto
            var target = $('#target_select').val();  // Asegúrate de que esto corresponda al ID correcto

            $.ajax({
                url: '/predict',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({player_name: player, target_column: target}),
                success: function(response) {
                    if (response.prediction) {
                        $('#predictionResult').html('Prediction for ' + response.player_name + ' on ' + response.target_column + ': ' + response.prediction);
                    } else {
                        $('#predictionResult').html('No prediction available.');
                    }
                },
                error: function() {
                    $('#predictionResult').html('Error retrieving prediction.');
                }
            });
        });
    });
</script>

</body>

</html>
